This repository contains code and results for a master’s thesis project on the legacy of GDR socialization using the German General Social Survey (ALLBUS) 2023.

## Data

The analysis uses **ALLBUS 2023** survey data. The dataset is provided by GESIS and can be obtained here:
https://www.gesis.org/allbus

To keep the repository lightweight and compliant with data access conditions, the raw dataset is **not** included in this repo. After downloading, place the file here:

- `data/raw/ALLBUS_2023.dta`

## Structure

- `README.md` – project overview and reproduction instructions.
- `pyproject.toml` / `poetry.lock` – Python dependencies and environment setup (Poetry).
- `scripts/` – executable pipeline scripts:
  - `run_pipeline.py` – runs the full analysis pipeline end-to-end.
  - `step5_dose10_dml_hte.py` – heterogeneous treatment effects (dose ≥ 10 years) estimation.
  - `step6_bootstrap_ci_dose10.py` – bootstrap confidence intervals for dose ≥ 10 years results.
- `src/` – helper modules used by the pipeline:
  - `clean.py` – data cleaning / recoding utilities.
  - `config.py` – shared configuration (paths, variable lists, constants).
  - `io.py` – I/O helpers (read/write derived data and outputs).
  - `audit.py` – variable audit / checks used in preprocessing and reporting.
- `data/` – local data directory (not fully tracked in git):
  - `raw/` – raw input data (NOT tracked; place `ALLBUS_2023.dta` here).
  - `derived/` – derived analysis datasets and intermediate outputs (partially tracked; CSV summaries may be tracked).
- `outputs/` – results produced by the pipeline:
  - `tables/` – final tables used for interpretation and write-up (CSV files).
  - `figures/` – figures (if/when generated by the pipeline).

## Reproducibility

### 1) Set up environment

This project is managed with **Poetry**.

Install dependencies:
```bash
poetry install
````

Activate the environment:

```bash
poetry shell
```

(Alternatively you can run commands via `poetry run ...` without activating.)

### 2) Add the data

Download ALLBUS 2023 from GESIS (see link above) and place the Stata file here:

```text
data/raw/ALLBUS_2023.dta
```

### 3) Run the pipeline

Run the full pipeline:

```bash
poetry run python scripts/run_pipeline.py
```

If you want to run specific steps only:

Heterogeneous treatment effects (dose ≥ 10 years):

```bash
poetry run python scripts/step5_dose10_dml_hte.py
```

Bootstrap confidence intervals (dose ≥ 10 years):

```bash
poetry run python scripts/step6_bootstrap_ci_dose10.py
```

### 4) Outputs

Key outputs are written to:

* `outputs/tables/` – CSV tables used in the write-up and interpretation
* `outputs/figures/` – figures (if generated)
